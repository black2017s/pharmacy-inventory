<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ - Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø®Ø²ÙˆÙ†</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&display=swap');

        body {
            font-family: 'Cairo', sans-serif;
            background-color: #f3f4f6;
        }
    </style>
    <script type="module">
        // ** Firebase Imports **
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
        // ðŸ’¡ Ø¥Ø¶Ø§ÙØ© Ø¯Ø§Ù„Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
        import { getAuth, signInWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-auth.js";

        // ----------------------------------------------------
        // âš ï¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø®Ø§ØµØ© Ø¨Ù€ Firebase - ÙŠØ¬Ø¨ Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† ØµØ­ØªÙ‡Ø§ âš ï¸
        // ----------------------------------------------------
        const firebaseConfig = {
            // ðŸš¨ Ø§Ø³ØªØ¨Ø¯Ù„ Ù‡Ø°Ù‡ Ø§Ù„Ù‚ÙŠÙ… Ø¨Ù‚ÙŠÙ… Ù…Ø´Ø±ÙˆØ¹Ùƒ Ø§Ù„ÙØ¹Ù„ÙŠØ© ðŸš¨
            apiKey: "AIzaSyA4BNXa8M324RgB3PN-EsbS8qEE2Grapfo",
            authDomain: "pharmacy-inventory-24e09.firebaseapp.com",
            projectId: "pharmacy-inventory-24e09",
            storageBucket: "pharmacy-inventory-24e09.firebasestorage.app",
            messagingSenderId: "274983528396",
            appId: "1:274983528396:web:1573e6d3600a0f20641f69",
            measurementId: "G-PT6B0BXC4H"
        };


        // --- Firebase Initialization ---
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);


        window.handleLogin = async (e) => {
            e.preventDefault();
            const form = e.target;
            const email = form.email.value;
            const password = form.password.value;
            const submitButton = document.getElementById('login-submit-button');
            const errorElement = document.getElementById('login-error-message');

            errorElement.textContent = '';
            submitButton.disabled = true;
            submitButton.innerHTML = `<i data-lucide="loader-2" class="w-4 h-4 ml-2 animate-spin"></i> Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù‚Ù‚...`;
            if (typeof lucide !== 'undefined') { lucide.createIcons(); }

            try {
                const userCredential = await signInWithEmailAndPassword(auth, email, password);
                // Ø¹Ù†Ø¯ Ù†Ø¬Ø§Ø­ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ØŒ ÙŠØªÙ… ØªÙˆØ¬ÙŠÙ‡Ù‡ Ø¥Ù„Ù‰ index.html Ø§Ù„Ø°ÙŠ Ø³ÙŠÙ‚ÙˆÙ… Ø¨Ø¯ÙˆØ±Ù‡ Ø¨Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø¯ÙˆØ±Ù‡
                window.location.href = 'index.html';

            } catch (error) {
                console.error("Login Error:", error);
                
                let errorMessage = "ÙØ´Ù„ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„. ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ÙˆÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±.";
                if (error.code === 'auth/user-not-found' || error.code === 'auth/wrong-password') {
                    errorMessage = "Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ø£Ùˆ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø©.";
                } else if (error.code === 'auth/invalid-email') {
                    errorMessage = "ØµÙŠØºØ© Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ØºÙŠØ± ØµØ­ÙŠØ­Ø©.";
                }

                errorElement.textContent = errorMessage;
                errorElement.classList.remove('hidden');
            } finally {
                submitButton.disabled = false;
                submitButton.textContent = 'ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„';
                if (typeof lucide !== 'undefined') { lucide.createIcons(); }
            }
        };

        // ØªÙØ¹ÙŠÙ„ Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª Lucide Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
        document.addEventListener('DOMContentLoaded', () => {
            if (typeof lucide !== 'undefined') { lucide.createIcons(); }
        });
    </script>
</head>

<body class="flex items-center justify-center min-h-screen bg-gray-100 p-4">
    <div class="w-full max-w-md bg-white rounded-xl shadow-2xl overflow-hidden" dir="rtl">
        <div class="p-8">
            <h2 class="text-3xl font-extrabold text-gray-900 text-center flex items-center justify-center mb-6">
                <i data-lucide="lock" class="w-8 h-8 ml-3 text-indigo-600"></i>
                ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
            </h2>
            <p class="text-center text-sm text-gray-600 mb-8">
                Ø£Ø¯Ø®Ù„ Ø¨ÙŠØ§Ù†Ø§Øª Ø­Ø³Ø§Ø¨Ùƒ Ù„Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø®Ø²ÙˆÙ†.
            </p>

            <div id="login-error-message" class="hidden bg-red-100 border-r-4 border-red-500 text-red-700 p-4 mb-4" role="alert">
                </div>

            <form onsubmit="window.handleLogin(event)" class="space-y-6">
                <div>
                    <label for="email" class="block text-sm font-medium text-gray-700 mb-1">Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</label>
                    <div class="relative">
                        <input id="email" name="email" type="email" autocomplete="email" required
                            class="block w-full rounded-lg border-gray-300 pr-10 pl-4 py-2.5 text-right focus:border-indigo-500 focus:ring-indigo-500 text-sm shadow-sm"
                            placeholder="example@domain.com" dir="ltr">
                        <div class="absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none">
                            <i data-lucide="mail" class="w-5 h-5 text-gray-400"></i>
                        </div>
                    </div>
                </div>

                <div>
                    <label for="password" class="block text-sm font-medium text-gray-700 mb-1">ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</label>
                    <div class="relative">
                        <input id="password" name="password" type="password" autocomplete="current-password" required
                            class="block w-full rounded-lg border-gray-300 pr-10 pl-4 py-2.5 text-right focus:border-indigo-500 focus:ring-indigo-500 text-sm shadow-sm"
                            placeholder="Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±" dir="ltr">
                        <div class="absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none">
                            <i data-lucide="lock-keyhole" class="w-5 h-5 text-gray-400"></i>
                        </div>
                    </div>
                </div>

                <div class="pt-2">
                    <button type="submit" id="login-submit-button"
                        class="w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition">
                        ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
                    </button>
                </div>
            </form>
        </div>
    </div>
</body>

</html>